div(ng-controller="HeaderController")
  nav#header.navbar.navbar-default(role="navigation")
    .container-fluid
      .navbar-header
        button.navbar-toggle.collapsed(type="button", data-toggle="collapse", data-target="#navbar")
          span.sr-only
          span.icon-bar
          span.icon-bar

        a.navbar-brand(style="padding-top: 12px", href="/app")
          img.img-circle(style="height: 30px; margin-right: 10px", src="/img/logo_white_on_blue.png")
          span {{global.config.appName}}

      #navbar.collapse.navbar-collapse
        ul.nav.navbar-nav
          li
            a(href="/") Home

        ul.nav.navbar-nav.navbar-right
          li.dropdown(ng-if="!global.me")
            button.btn.btn-default.navbar-btn(data-toggle="modal", data-target="#loginModal")
              | Login

          li.dropdown(ng-if="global.me")
            a.dropdown-toggle(href="#", data-toggle="dropdown")
              img.img-circle(style="height: 18px; margin-right: 10px", ng-src="{{global.me.picture}}")
              span {{global.me.username}}
              span.caret
            ul.dropdown-menu(role="menu", style="padding: 17px")
              li
                a(href="/users/{{global.me.username}}")
                  | Profile
              li
                a(href="/logout")
                  | Logout

  #loginModal.modal.fade(tabindex="-1", role="dialog", aria-hidden="true")
    .modal-dialog
      .modal-content
        .modal-header
          button.close(type='button', data-dismiss='modal')
            span(aria-hidden='true') Ã—
            span.sr-only Close
          h4.modal-title Login to {{global.config.appName}}
        #login-box.modal-body
          form.form(role="form")
            .form-group
              input.form-control(type="email", placeholder="Email", name="username")
            .form-group
              input.form-control(type="password", placeholder="Password", name="password")

        .modal-footer
          button.btn.btn-default(type='button', data-dismiss='modal') Cancel
          button#loginButton.btn.btn-success(type='button', ng-click="login()") Login