nav#header.navbar.navbar-default(role="navigation", ng-controller="HeaderController")
  .container-fluid
    .navbar-header
      button.navbar-toggle.collapsed(type="button", data-toggle="collapse", data-target="#navbar")
        span.sr-only
        span.icon-bar
        span.icon-bar

      a.navbar-brand(href="/")
        | {{global.config.appName}}
      if user
        a.navbar-brand(href="/app")
          | App

    #navbar.collapse.navbar-collapse
      ul.nav.navbar-nav.navbar-right
        if !user
          li.dropdown
            button.btn.btn-info.navbar-btn(data-toggle="modal", data-target="#loginModal")
              | Login

        if user
          li.dropdown
            a.dropdown-toggle(href="#", data-toggle="dropdown")
              | #{user.username}
              span.caret
            ul.dropdown-menu(role="menu", style="padding: 17px")
              li
                a(href="/logout")
                  | Logout

  #loginModal.modal.fade(tabindex="-1", role="dialog", aria-hidden="true")
    .modal-dialog
      .modal-content
        .modal-header
          button.close(type='button', data-dismiss='modal')
            span(aria-hidden='true') Ã—
            span.sr-only Close
          h4.modal-title Login to {{global.config.appName}}
        #login-box.modal-body
          form.form(role="form")
            .form-group
              input.form-control(type="email", placeholder="Email", name="username")
            .form-group
              input.form-control(type="password", placeholder="Password", name="password")

        .modal-footer
          button.btn.btn-default(type='button', data-dismiss='modal') Cancel
          button.btn.btn-success(type='button', ng-click="login()") Login